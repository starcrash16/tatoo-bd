<div class="layout-container" [class.is-mobile]="mobileQuery.matches">
  
  <!-- TOOLBAR SUPERIOR -->
  <mat-toolbar class="main-toolbar">
    <button mat-icon-button (click)="snav.toggle()" class="menu-btn">
      <mat-icon>menu</mat-icon>
    </button>
    
    <span class="toolbar-title">TATTOO STUDIO MANAGER</span>
    
    <span class="spacer"></span>
    
    <!-- Perfil / Usuario Dinámico -->
    <div class="user-profile d-flex align-items-center gap-2">
      <!-- Muestra el nombre real del usuario -->
      <span class="username d-none d-sm-block">{{ nombreUsuario }}</span>
      <mat-icon>account_circle</mat-icon>
    </div>
  </mat-toolbar>

  <!-- CONTENEDOR SIDENAV -->
  <mat-sidenav-container class="sidenav-container" [style.marginTop.px]="mobileQuery.matches ? 56 : 0">
    
    <!-- MENÚ LATERAL -->
    <mat-sidenav #snav [mode]="mobileQuery.matches ? 'over' : 'side'" 
                 [fixedInViewport]="mobileQuery.matches" fixedTopGap="56"
                 [opened]="!mobileQuery.matches"
                 class="custom-sidenav">
      
      <div class="sidenav-header text-center py-4">
        <!-- Logo con Iniciales Dinámicas -->
        <div class="sidenav-logo">{{ iniciales }}</div>
      </div>

      <mat-nav-list>
        
        <a mat-list-item routerLink="/dashboard/resumen" routerLinkActive="active-link" class="nav-item">
          <mat-icon matListItemIcon>dashboard</mat-icon>
          <span matListItemTitle>Resumen</span>
        </a>

        <a mat-list-item routerLink="/dashboard/citas" routerLinkActive="active-link" class="nav-item">
          <mat-icon matListItemIcon>event_note</mat-icon>
          <span matListItemTitle>Gestión Citas</span>
        </a>

        <a mat-list-item routerLink="/dashboard/inventario" routerLinkActive="active-link" class="nav-item">
          <mat-icon matListItemIcon>inventory_2</mat-icon>
          <span matListItemTitle>Inventario</span>
        </a>

        <!-- NUEVO ITEM: COMPRAS -->
        <a mat-list-item routerLink="/dashboard/compras" routerLinkActive="active-link" class="nav-item">
          <mat-icon matListItemIcon>shopping_cart</mat-icon>
          <span matListItemTitle>Compras & Pedidos</span>
        </a>

        <a mat-list-item routerLink="/dashboard/clientes" routerLinkActive="active-link" class="nav-item">
          <mat-icon matListItemIcon>people</mat-icon>
          <span matListItemTitle>Clientes VIP</span>
        </a>

        <a mat-list-item routerLink="/dashboard/sesiones" routerLinkActive="active-link" class="nav-item">
          <mat-icon matListItemIcon>event_available</mat-icon>
          <span matListItemTitle>Sesiones</span>
        </a>

        <!-- ITEM: REPORTES -->
        <a mat-list-item routerLink="/dashboard/reportes" routerLinkActive="active-link" class="nav-item">
          <mat-icon matListItemIcon>description</mat-icon>
          <span matListItemTitle>Reportes PDF</span>
        </a>

        <mat-divider class="my-3 opacity-25 bg-white"></mat-divider>

        <!-- Botón Cerrar Sesión Conectado -->
        <a mat-list-item (click)="cerrarSesion()" class="nav-item logout-item" style="cursor: pointer;">
          <mat-icon matListItemIcon>logout</mat-icon>
          <span matListItemTitle>Cerrar Sesión</span>
        </a>

      </mat-nav-list>
    </mat-sidenav>

    <!-- CONTENIDO PRINCIPAL -->
    <mat-sidenav-content class="main-content">
      <div class="content-wrapper">
        <router-outlet></router-outlet>
      </div>
    </mat-sidenav-content>

  </mat-sidenav-container>
</div>